// const mongoose = require('mongoose');

// // Connect to MongoDB
// mongoose.connect('mongodb://localhost', {
//     useNewUrlParser: true,
//     useUnifiedTopology: true
// })
//     .then(() => {
//         console.log('Connected to MongoDB!');
//         return true;
//     })
//     .catch((error) => {
//         console.error('Error connecting to MongoDB:', error);
//         return false;
//     });

const http = require('http');
const fs = require('fs');
const path = require('path');


const Site = require("./controllers/controller.site.js");
const Static = require("./controllers/controller.static.js");
// const AI = require("./controllers/controller.ai.js");
// const Auth = require("./")

const server = http.createServer((req, res) => { // onRequest
  // controller per route
  if   (req.url.startsWith('/ui'))         Static(req,res);
  // else if   (req.url === "/ai")      AI()(req,res);
  // else if   (req.url === "/auth")    Auth()(req,res);
  // else if   (req.url === "/gendata") GenData()(req,res);
  else if        (req.url.startsWith('/'))           Site(req,res);
  else {
    // SendError();
    throw new Error("path not supported:"+req.url);
  }
});

server.listen(8080, () => console.log('Server running on port 8080'));


