<!DOCTYPE html>
<html>
<head>
  <title>GitHub File Manager</title>
  <script>
    class GitHub {
      constructor(owner, repo, token) {
        this.api = 'https://api.github.com';
        this.owner = owner;
        this.repo = repo;
        this.token = token;
      }

      // Method to get a file
      async getFile(path) {
        const url = `${this.api}/repos/${this.owner}/${this.repo}/contents/${path}`;
        const response = await fetch(url);
        const data = await response.json();
        return atob(data.content);
      }

      // Method to update a file
      async updateFile(path, content, message) {
        const url = `${this.api}/repos/${this.owner}/${this.repo}/contents/${path}`;
        const response = await fetch(url, {
          method: 'PUT',
          headers: {
            'Authorization': `token ${this.token}`,
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            message: message,
            content: btoa(content)
          })
        });
        return response.json();
      }
    }

    // Function to handle form submission
    async function handleFormSubmit(event) {
      event.preventDefault();
      const owner = document.getElementById('owner').value;
      const repo = document.getElementById('repo').value;
      const token = document.getElementById('token').value;
      const github = new GitHub(owner, repo, token);
      const path = document.getElementById('path').value;
      const content = document.getElementById('content').value;
      const message = document.getElementById('message').value;
      const result = await github.updateFile(path, content, message);
      console.log(result);
    }

    // Function to handle get file button click
    async function handleGetFileClick() {
      const owner = document.getElementById('owner').value;
      const repo = document.getElementById('repo').value;
      const token = document.getElementById('token').value;
      const github = new GitHub(owner, repo, token);
      const path = document.getElementById('path').value;
      const content = await github.getFile(path);
      alert(content);
    }

    // Add event listeners
    window.addEventListener('load', () => {
      const form = document.getElementById('update-form');
      form.addEventListener('submit', handleFormSubmit);
      const getFileButton = document.getElementById('get-file-button');
      getFileButton.addEventListener('click', handleGetFileClick);
    });
  </script>
</head>
<body>
  <h1>GitHub File Manager</h1>
  <form id="update-form">
    <label for="owner">Owner:</label><br>
    <input type="text" id="owner" name="owner"><br>
    <label for="repo">Repository:</label><br>
    <input type="text" id="repo" name="repo"><br>
    <label for="token">Token:</label><br>
    <input type="password" id="token" name="token"><br>
    <label for="path">File Path:</label><br>
    <input type="text" id="path" name="path"><br>
    <label for="content">File Content:</label><br>
    <textarea id="content" name="content"></textarea><br>
    <label for="message">Commit Message:</label><br>
    <input type="text" id="message" name="message"><br>
    <input type="submit" value="Update File">
  </form>
  <button id="get-file-button">Get File</button>
</body>
</html>
